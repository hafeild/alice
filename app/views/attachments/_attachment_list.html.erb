<%# 
This is expecting the following local variables:

  vertical_from -- the vertical whose page this is being presented
  editable -- if true and can_edit is true, then a 'delete' button will appear 
              next to  each attachment. Defaults to false.
  data -- defaults to vertical_from.attachments
  title_tag -- defaults to h2; this is the tag to use for the title.
%>
  <% editable = false if not defined?(editable) %>
  <% vertical_from_name = vertical_from.class.to_s.downcase %>
  <% if not defined?(data) or data.nil? %>
    <% data = vertical_from.attachments %>
  <% end %>
  <% if not defined?(title_tag) %>
    <% title_tag = :h2 %>
  <% end %>

  <div class="file-attachments">
    <<%=title_tag%>>File attachments</<%=title_tag%>>
    
    <% if can_edit? %>
      <%= render(partial: "attachments/new", locals: {vertical: vertical_from}) %>
    <% end %>

    <ul>
      <%= render(partial: "attachments/attachment_list_item", 
        collection: data, as: :attachment,
        locals: {vertical_from: vertical_from, editable: editable}) || 
        "This #{vertical_from_name} does not have any attachments." %>
    </ul>
  </div>