<% provide(:title, @software.name) %>
<div class="container software-page" data-software-id="<%= @software.id %>">
  <h1><span class="name"><%= @software.name %></span>
  <% if can_edit? %>
    <%= link_to edit_software_path(@software.id)  do %>
      <button type="button" class="btn btn-default btn-md">
        <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> Edit
      </button>
    <% end %>

    <%= link_to @software, method: :delete, data: {
        confirm: "Are you sure you want to delete this page?"} do %> 
      <button type="button" class="btn btn-default btn-md">
        <span class="glyphicon glyphicon-trash" aria-hidden="true"></span> 
      Delete </button>
    <% end %>
  <% end %>
  </h1>

  <div class="summary-wrapper">
    <h2>Summary</h2>
    <span class="summary"><%= @software.summary %></span>
  </div>

  <div class="description-wrapper">
    <h2>Description</h2>
    <span class="description"><%= @software.description.html_safe %></span>
  </div>

  <div class="tags">
    <h2>Tags</h2>
    <% if @software.tags.size == 0 %>
      There are currently no tags associated with this software.
    <% else %>
      <%= @software.tags.map{|tag| tag.text}.join(',') %>
    <% end %>
  </div>

  <div class="web-resources">
    <h2>Web resources</h2>
    <% if @software.web_resources.size == 0 %>
      There are currently no resources associated with this software.
    <% else %>
      <ul>
      <% @software.web_resources.each do |web_resource| %>
        <li><a href="<%= web_resource.url %>"
          ><%= web_resource.description %></a>
        </li>
      <% end %>
      </ul>
    <% end %>
  </div>

  <div class="examples">
    <h2>Examples</h2>
    <% if @software.examples.size == 0 %>
      There are currently no examples associated with this software.
    <% else %>
      <ul>
      <% @software.examples.each do |example| %>
        <h3><%= example.title.nil? ? "(No title given)" : example.title %></h3>
        <p>
          <%= example.description.nil? ?
              "(No description provided)" : example.description.html_safe %>
        </p>
        <% if can_edit? %>
          <%= form_for(example, method: :delete,
              url: edit_example_path(@software, example)) do |f| %>
            <button class="btn btn-sm btn-danger">Remove example</button>
          <% end %>
        <% end %>
      <% end %>
      </ul>     
    <% end %>
    <p>
    <% if can_edit? %>
      <a href="<%= new_example_path @software %>"
        ><button class="btn btn-sm btn-default">Add new example</button
      ></a>
      <a href="<%= new_example_path @software %>"
        ><button class="btn btn-sm btn-default">Add existing example</button
      ></a>
    <% end %>
    </p> 
  </div>

</div>
